@* Part A - Incident Report Details (Readonly Mode with Kendo UI Controls) *@

<div class="part-a-container bg-white shadow-md rounded-lg p-6">
    <div class="mb-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-2">Part A - Incident Report Details</h3>
        <p class="text-sm text-gray-600">Initial incident report information</p>
    </div>

    <div class="space-y-6">
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50">
            <legend class="text-lg font-semibold text-gray-900 px-2">Incident Details</legend>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-group">
                    <label for="partA_incidentType" class="block text-sm font-medium text-gray-700 mb-1">
                        Incident Type
                    </label>
                    <select kendo-drop-down-list
                            k-options="vm.partA.incidentTypeOptions"
                            k-ng-model="vm.partA.incidentType"
                            id="partA_incidentType"
                            class="w-full"
                            k-enable="false">
                    </select>
                </div>

                <div class="form-group" ng-show="vm.partA.incidentOther">
                    <label for="partA_incidentOther" class="block text-sm font-medium text-gray-700 mb-1">
                        If 'Others', please specify
                    </label>
                    <input kendo-text-box
                           k-ng-model="vm.partA.incidentOther"
                           id="partA_incidentOther"
                           style="width: 100%;"
                           k-enable="false" />
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="form-group">
                    <label for="partA_incidentDate" class="block text-sm font-medium text-gray-700 mb-1">
                        Date of Incident
                    </label>
                    <input kendo-date-picker
                           k-ng-model="vm.partA.incidentDate"
                           k-format="'dd-MMM-yyyy'"
                           id="partA_incidentDate"
                           class="w-full"
                           k-enable="false" />
                </div>

                <div class="form-group">
                    <label for="partA_incidentTime" class="block text-sm font-medium text-gray-700 mb-1">
                        Time (24-hr)
                    </label>
                    <input kendo-time-picker
                           k-ng-model="vm.partA.incidentTime"
                           k-format="'HH:mm'"
                           id="partA_incidentTime"
                           class="w-full"
                           disabled/>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="form-group">
                    <label for="partA_sector" class="block text-sm font-medium text-gray-700 mb-1">
                        Sector
                    </label>
                    <select kendo-drop-down-list
                            k-options="vm.partA.sectorOptions"
                            k-ng-model="vm.partA.sectorCode"
                            id="partA_sector"
                            class="w-full"
                            k-enable="false">
                    </select>
                </div>

                <div class="form-group">
                    <label for="partA_lob" class="block text-sm font-medium text-gray-700 mb-1">
                        LOB
                    </label>
                    <select kendo-drop-down-list
                            k-options="vm.partA.lobOptions"
                            k-ng-model="vm.partA.lobCode"
                            id="partA_lob"
                            class="w-full"
                            k-enable="false">
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="form-group">
                    <label for="partA_department" class="block text-sm font-medium text-gray-700 mb-1">
                        Department
                    </label>
                    <select kendo-drop-down-list
                            k-options="vm.partA.departmentOptions"
                            k-ng-model="vm.partA.departmentCode"
                            id="partA_department"
                            class="w-full"
                            k-enable="false">
                    </select>
                </div>

                <div class="form-group">
                    <label for="partA_location" class="block text-sm font-medium text-gray-700 mb-1">
                        Location of Incident
                    </label>
                    <select kendo-drop-down-list
                            k-options="vm.partA.locationOptions"
                            k-ng-model="vm.partA.locationCode"
                            id="partA_location"
                            class="w-full"
                            k-enable="false">
                    </select>
                </div>
            </div>

            <div class="form-group mt-4">
                <label for="partA_exactLocation" class="block text-sm font-medium text-gray-700 mb-1">
                    Exact Location
                </label>
                <input kendo-text-box
                       k-ng-model="vm.partA.exactLocation"
                       id="partA_exactLocation"
                       style="width: 100%;"
                       k-enable="false" />
            </div>

            <div class="form-group mt-4">
                <label for="partA_incidentDescription" class="block text-sm font-medium text-gray-700 mb-1">
                    Near-miss / Incident Description
                </label>
                <textarea kendo-text-area
                          k-ng-model="vm.partA.incidentDescription"
                          k-rows="4"
                          id="partA_incidentDescription"
                          style="width: 100%;"
                          k-enable="false"></textarea>
            </div>
        </fieldset>

        <!-- Particulars of Injured Person(s) -->
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50" ng-show="vm.partA.incidentType.code == '1' && vm.partA.injuredPersons.length > 0">
            <legend class="text-lg font-semibold text-gray-900 px-2">Particulars of Injured Person(s)</legend>

            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Type</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Name</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Employee No</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Contact No</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Company</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Age</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Race</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Nationality</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Gender</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Designation</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr ng-repeat="person in vm.partA.injuredPersons">
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.type === 'E' ? 'Employee' : 'Contractor/Public' }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.name }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.employeeNo }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.contactNo }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.company }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.age }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.race }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.nationality }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.gender }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ person.designation }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>

        <!-- Additional Information -->
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50">
            <legend class="text-lg font-semibold text-gray-900 px-2">Additional Information</legend>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Any Eye Witness?
                    </label>
                    <div class="flex gap-4 mt-2">
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.hasEyewitness" value="Y" class="form-radio" disabled />
                            <span class="ml-2">Yes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.hasEyewitness" value="N" class="form-radio" disabled />
                            <span class="ml-2">No</span>
                        </label>
                    </div>
                </div>

            </div>

            <!-- Fields that only show for Injury incidents (incidentType == '1') -->
            <div ng-show="vm.partA.incidentType.code == '1'">
                <div class="form-group mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Is this incident job related?
                    </label>
                    <div class="flex gap-4 mt-2">
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.isJobRelated" value="Yes" class="form-radio" disabled />
                            <span class="ml-2">Yes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.isJobRelated" value="No" class="form-radio" disabled />
                            <span class="ml-2">No</span>
                        </label>
                    </div>
                </div>

                <div class="form-group mt-4">
                    <label for="partA_hospitalClinic" class="block text-sm font-medium text-gray-700 mb-1">
                        Hospital / Clinic where the injured person was examined or treated
                    </label>
                    <textarea kendo-text-area
                              k-ng-model="vm.partA.hospitalClinicName"
                              k-rows="2"
                              id="partA_hospitalClinic"
                              style="width: 100%;"
                              k-enable="false"></textarea>
                </div>

                <div class="form-group mt-4">
                    <label for="partA_workingOvertime" class="block text-sm font-medium text-gray-700 mb-1">
                        Was the injured person working overtime when the accident happened?
                    </label>
                    <textarea kendo-text-area
                              k-ng-model="vm.partA.workingOvertime"
                              k-rows="2"
                              id="partA_workingOvertime"
                              style="width: 100%;"
                              k-enable="false"></textarea>
                </div>

                <div class="form-group mt-4">
                    <label for="partA_officialWorkingHours" class="block text-sm font-medium text-gray-700 mb-1">
                        What is the official working hours of the injured person on the day of incident?
                    </label>
                    <input kendo-text-box
                           k-ng-model="vm.partA.officialWorkingHours"
                           id="partA_officialWorkingHours"
                           style="width: 100%;"
                           k-enable="false" />
                </div>
            </div>

            <!-- Damage section for non-injury incidents -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Damage to property / equipment?
                    </label>
                    <div class="flex gap-4 mt-2">
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.hasDamage" value="Y" class="form-radio" disabled />
                            <span class="ml-2">Yes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" ng-model="vm.partA.hasDamage" value="N" class="form-radio" disabled />
                            <span class="ml-2">No</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-group mt-4" ng-show="vm.partA.hasDamage == 'Y'">
                <label for="partA_damageDescription" class="block text-sm font-medium text-gray-700 mb-1">
                    Description of Damage
                </label>
                <textarea kendo-text-area
                          k-ng-model="vm.partA.damageDescription"
                          k-rows="3"
                          id="partA_damageDescription"
                          style="width: 100%;"
                          k-enable="false"></textarea>
            </div>
        </fieldset>

        <!-- Eye Witnesses -->
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50" ng-show="vm.partA.hasEyewitness == 'Y' && vm.partA.eyewitnesses.length > 0">
            <legend class="text-lg font-semibold text-gray-900 px-2">Eye Witnesses</legend>

            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Name</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Employee No</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Designation</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Contact No</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr ng-repeat="witness in vm.partA.eyewitnesses">
                            <td class="px-4 py-3 text-sm text-gray-900">{{ witness.name }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ witness.employeeNo }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ witness.designation }}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">{{ witness.contactNo }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>

        <!-- Particulars of Person Submitting -->
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50">
            <legend class="text-lg font-semibold text-gray-900 px-2">Particulars of Person Submitting</legend>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-group">
                    <label for="partA_superiorName" class="block text-sm font-medium text-gray-700 mb-1">
                        Name
                    </label>
                    <input kendo-text-box
                           k-ng-model="vm.partA.superiorName"
                           id="partA_superiorName"
                           style="width: 100%;"
                           k-enable="false" />
                </div>

                <div class="form-group">
                    <label for="partA_superiorEmpNo" class="block text-sm font-medium text-gray-700 mb-1">
                        Employee Number
                    </label>
                    <input kendo-text-box
                           k-ng-model="vm.partA.superiorEmpNo"
                           id="partA_superiorEmpNo"
                           style="width: 100%;"
                           k-enable="false" />
                </div>

                <div class="form-group">
                    <label for="partA_superiorDesignation" class="block text-sm font-medium text-gray-700 mb-1">
                        Designation
                    </label>
                    <input kendo-text-box
                           k-ng-model="vm.partA.superiorDesignation"
                           id="partA_superiorDesignation"
                           style="width: 100%;"
                           k-enable="false" />
                </div>

                <div class="form-group">
                    <label for="partA_submittedDate" class="block text-sm font-medium text-gray-700 mb-1">
                        Date Submitted
                    </label>
                    <input kendo-date-picker
                           k-ng-model="vm.partA.submittedDate"
                           k-format="'dd-MMM-yyyy'"
                           id="partA_submittedDate"
                           class="w-full"
                           k-enable="false" />
                </div>
            </div>
        </fieldset>

        <!-- Workflow Submission History -->
        <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50">
            <legend class="text-lg font-semibold text-gray-900 px-2">Workflow Submission History</legend>

            <div ng-show="vm.getWorkflowsByAction('01').length > 0">
                <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">To</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Designation</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Date of Submission</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr ng-repeat="workflow in vm.getWorkflowsByAction('01')">
                            <td class="px-4 py-3 text-sm text-gray-900">
                                <div ng-bind-html="workflow.toDesignation || 'N/A'"></div>
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                <div ng-bind-html="workflow.fromDesignation || 'N/A'"></div>
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                {{workflow.date | date:'dd-MMM-yyyy HH:mm' || 'N/A'}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div ng-show="vm.getWorkflowsByAction('01').length === 0" class="text-center py-4 text-gray-500">
                No workflow history available for this part
            </div>
        </fieldset>
    </div>
</div>