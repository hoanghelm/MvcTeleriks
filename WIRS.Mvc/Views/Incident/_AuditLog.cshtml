@* Audit Log - Incident Work Flow *@

<div class="bg-white shadow-md rounded-lg p-6 mt-6">
    <fieldset class="border border-gray-300 rounded-lg p-6 bg-gray-50">
        <legend class="text-lg font-semibold text-gray-900 px-2">Incident Work Flow</legend>

        <div ng-show="vm.incident.workflows && vm.incident.workflows.length > 0">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">From</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Designation</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Recipient</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Designation</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Date of Submission</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase">Remarks</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr ng-repeat="workflow in vm.incident.workflows">
                            <td class="px-4 py-3 text-sm text-gray-900">
                                {{ workflow.fromName || 'N/A' }}
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                {{ workflow.fromDesignation || 'N/A' }}
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                <div ng-bind-html="workflow.toName || 'N/A'"></div>
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                <div ng-bind-html="workflow.toDesignation || 'N/A'"></div>
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                {{workflow.date | date:'dd-MMM-yyyy HH:mm' || 'N/A'}}
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-900">
                                {{ workflow.remarks }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div ng-show="!vm.incident.workflows || vm.incident.workflows.length === 0" class="text-center py-8 text-gray-500">
            No workflow history available
        </div>
    </fieldset>
</div>
