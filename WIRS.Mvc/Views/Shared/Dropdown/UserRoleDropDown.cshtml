@* Refactored to use JavaScript framework - no more ViewBag dependency *@
@(Html.Kendo().DropDownList()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
    .DataTextField("Value")
    .DataValueField("Code")
    .OptionLabel("Select Role")
    .HtmlAttributes(new { @class = "form-control", style = "width: 100%" })
    .AutoBind(false)
)

<script>
$(document).ready(function() {
    $(document).on('framework:ready', function() {
        // Initialize user role dropdown using the framework
        const fieldName = '@ViewData.TemplateInfo.GetFullHtmlFieldName("")';
        const userRoleDropdown = window.DropdownFactory.createUserRoleDropdown('#' + fieldName);

        // Store reference for cleanup if needed
        if (!window.pageDropdowns) {
            window.pageDropdowns = {};
        }
        window.pageDropdowns[fieldName] = userRoleDropdown;
    });
});
</script>