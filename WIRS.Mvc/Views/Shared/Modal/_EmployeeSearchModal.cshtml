@model WIRS.Mvc.ViewModels.EmployeeSearchViewModel

@{
    var modalId = Model?.ModalId ?? "employeeSearchModal";
    var gridId = Model?.GridId ?? "employeeSearchGrid";
    var onSelectCallback = Model?.OnSelectCallback ?? "onEmployeeSelected";
}

@(Html.Kendo().Window()
    .Name(modalId)
    .Title("Search Employee")
    .Modal(true)
    .Width(1000)
    .Height(600)
    .Resizable(r => r.Enabled(false))
    .Visible(false)
    .Actions(actions => actions.Close())
    .Events(e => e.Close("onEmployeeSearchModalClose").Open("onEmployeeSearchModalOpen"))
    .Content(@<text>
    <div class="simple-search-container">
        <div class="search-form">
            <div class="search-fields">
                <div class="field-group" style="flex: 1;">
                    @(Html.Kendo().TextBox()
                    .Name("filterEmployeeName")
                    .Placeholder("Search by employee name...")
                    .HtmlAttributes(new {
                    @class = "search-input",
                    style = "width: 100%;",
                    onkeydown = "if(event.keyCode===13) performAdvancedSearch();"
                    })
                    )
                </div>
                <div class="search-button">
                    @(Html.Kendo().Button()
                    .Name("btnSearch")
                    .Content("<svg class='w-4 h-4' fill='none' stroke='currentColor' viewBox='0 0 24 24'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z'></path></svg>")
                    .HtmlAttributes(new { @class = "btn-primary" })
                    .Events(e => e.Click("performAdvancedSearch"))
                    )
                </div>
            </div>
        </div>

        <div class="results-section">
            @(Html.Kendo().Grid<dynamic>()
            .Name(gridId)
            .Columns(columns =>
            {
            columns.Bound("EmployeeId").Title("Employee No").Width(120).ClientTemplate("<a href='\\#' onclick='selectEmployeeById(\"#=EmployeeId#\"); return false;' style='color: \\#0066cc; text-decoration: underline;'>#=EmployeeId#</a>");
            columns.Bound("EmployeeName").Title("Employee Name").Width(200);
            columns.Bound("CostCentreName").Title("Cost Center").Width(200);
            columns.Bound("Designation").Title("Designation").Width(180);
            columns.Bound("ContactNo").Title("Contact No").Width(120);
            })
            .Sortable()
            .Pageable(pageable => pageable.PageSizes(new[] { 10, 25, 50 }))
            .Height(350)
            .DataSource(dataSource => dataSource
            .Custom()
            .PageSize(10)
            .Schema(schema => schema
            .Model(model => {
            model.Id("EmployeeId");
            model.Field("EmployeeId", typeof(string));
            model.Field("EmployeeName", typeof(string));
            model.Field("CostCentreName", typeof(string));
            model.Field("Designation", typeof(string));
            model.Field("Email", typeof(string));
            model.Field("ContactNo", typeof(string));
            })
            )
            )
            .NoRecords(noRecords => noRecords.Template(@"
            <div class='simple-empty-state'>
            <p>No employees found.</p>
            </div>
            "))
            )
        </div>
    </div>
</text>)
)